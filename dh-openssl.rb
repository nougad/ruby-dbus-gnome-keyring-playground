require 'openssl'
# Try to test openssl DH algo with snipped from dzone

PRIME = 179769313486231590770839156793787453197860296048756011706444423684197180216158519368947833795864925541502180565485980503646440548199239100050792877003355816639229553136239076508735759914822574862575007425302077447712589550957937778424442426617334727629299387668709205606050270810842907692932019128194467627007
BITS  = 1024
BYTES = BITS/8
BASE  = 2

require 'dh.rb'
key = DH.new BASE, PRIME, 999999


dh = OpenSSL::PKey::DH.new(1024)
# computes nearly to infinity
dh.compute_key(key.my_public_key)

# FIXME how to get useful format?
puts dh.public_key
#puts key.secret(dh.public_key)

